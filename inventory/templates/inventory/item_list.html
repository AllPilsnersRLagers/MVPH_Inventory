{% extends "base.html" %}

{% block title %}Inventory â€” MVPH{% endblock %}

{% block content %}
<div class="filters">
  <div id="category-tabs" class="category-tabs" role="tablist">
    <a href="{% url 'inventory:item_list' %}"
       class="tab {% if not current_category %}active{% endif %}"
       hx-get="{% url 'inventory:item_list' %}"
       hx-target="#item-table-wrapper"
       hx-push-url="true">All</a>
    <a href="{% url 'inventory:item_list' %}?category=ingredient"
       class="tab {% if current_category == 'ingredient' %}active{% endif %}"
       hx-get="{% url 'inventory:item_list' %}?category=ingredient"
       hx-target="#item-table-wrapper"
       hx-push-url="true">Ingredients</a>
    <a href="{% url 'inventory:item_list' %}?category=chemical"
       class="tab {% if current_category == 'chemical' %}active{% endif %}"
       hx-get="{% url 'inventory:item_list' %}?category=chemical"
       hx-target="#item-table-wrapper"
       hx-push-url="true">Chemicals</a>
    <a href="{% url 'inventory:item_list' %}?category=finished_good"
       class="tab {% if current_category == 'finished_good' %}active{% endif %}"
       hx-get="{% url 'inventory:item_list' %}?category=finished_good"
       hx-target="#item-table-wrapper"
       hx-push-url="true">Finished Goods</a>
  </div>

  <a href="{% url 'inventory:item_create' %}" class="btn btn-add">+ New Item</a>

  <input type="search"
         name="search"
         placeholder="Search items..."
         value="{{ search_query }}"
         hx-get="{% url 'inventory:item_list' %}{% if current_category %}?category={{ current_category }}{% if current_subcategory %}&subcategory={{ current_subcategory }}{% endif %}{% endif %}"
         hx-trigger="keyup changed delay:300ms"
         hx-target="#item-table-wrapper"
         hx-include="this"
         class="search-input">
</div>

{% if sub_tabs %}
<div id="sub-tabs" class="sub-tabs" role="tablist">
  {% for tab in sub_tabs %}
  <a href="{{ tab.url }}"
     class="sub-tab {% if tab.active %}active{% endif %}"
     hx-get="{{ tab.url }}"
     hx-target="#item-table-wrapper"
     hx-push-url="true">{{ tab.label }}</a>
  {% endfor %}
</div>
{% else %}
<div id="sub-tabs"></div>
{% endif %}

<div id="item-table-wrapper">
  {% include "inventory/partials/item_table.html" %}
</div>
{% endblock %}
