{% if items %}
<table class="item-table">
  <thead>
    <tr>
      {% for col in columns %}
      <th>
        <a href="{{ col.url }}"
           hx-get="{{ col.url }}"
           hx-target="#item-table-wrapper"
           class="sort-header{% if col.active %} active{% endif %}">{{ col.label }}</a>
      </th>
      {% endfor %}
      <th>Unit</th>
      {% if show_earmarked_column %}<th>Earmarked For</th>{% endif %}
      <th>Status</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for item in items %}
      {% include "inventory/partials/item_row.html" %}
    {% endfor %}
  </tbody>
</table>
{% else %}
<p class="empty-state">No items found.</p>
{% endif %}

<div id="category-tabs" class="category-tabs" role="tablist" hx-swap-oob="true">
  <a href="{% url 'inventory:item_list' %}"
     class="tab {% if not current_category %}active{% endif %}"
     hx-get="{% url 'inventory:item_list' %}"
     hx-target="#item-table-wrapper"
     hx-push-url="true">All</a>
  <a href="{% url 'inventory:item_list' %}?category=ingredient"
     class="tab {% if current_category == 'ingredient' %}active{% endif %}"
     hx-get="{% url 'inventory:item_list' %}?category=ingredient"
     hx-target="#item-table-wrapper"
     hx-push-url="true">Ingredients</a>
  <a href="{% url 'inventory:item_list' %}?category=chemical"
     class="tab {% if current_category == 'chemical' %}active{% endif %}"
     hx-get="{% url 'inventory:item_list' %}?category=chemical"
     hx-target="#item-table-wrapper"
     hx-push-url="true">Chemicals</a>
  <a href="{% url 'inventory:item_list' %}?category=finished_good"
     class="tab {% if current_category == 'finished_good' %}active{% endif %}"
     hx-get="{% url 'inventory:item_list' %}?category=finished_good"
     hx-target="#item-table-wrapper"
     hx-push-url="true">Finished Goods</a>
</div>

{% if sub_tabs %}
<div id="sub-tabs" class="sub-tabs" role="tablist" hx-swap-oob="true">
  {% for tab in sub_tabs %}
  <a href="{{ tab.url }}"
     class="sub-tab {% if tab.active %}active{% endif %}"
     hx-get="{{ tab.url }}"
     hx-target="#item-table-wrapper"
     hx-push-url="true">{{ tab.label }}</a>
  {% endfor %}
</div>
{% else %}
<div id="sub-tabs" hx-swap-oob="true"></div>
{% endif %}
